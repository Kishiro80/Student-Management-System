(self["webpackChunkstudentmgmt_v3"]=self["webpackChunkstudentmgmt_v3"]||[]).push([[756],{2589:(e,l,t)=>{"use strict";t.d(l,{e:()=>i});var s=t(52),a=t.n(s);const o="../php/",i=async e=>{let l=o+"admin.php";try{var t=await a().post(l,e);return t.data}catch(s){console.error(s)}}},4756:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>H});var s=t(3673),a=t(2323);const o={id:"q-app"},i={class:"q-pa-md"},d={class:"row q-col-gutter-sm"},n={class:"col"},c=(0,s.Wm)("div",{class:"q-pa-sm q-gutter-sm"},null,-1),u={key:1,class:"column",outline:""},r=(0,s.Wm)("div",{class:"text-h6 q-mb-md"},"Subject List",-1),m={class:"row"},p=(0,s.Wm)("div",{class:"q-pa-md text-h5"},"New Class",-1),w=(0,s.Uk)("Class Name"),g=(0,s.Uk)("Year");function h(e,l,t,h,f,b){const _=(0,s.up)("q-icon"),I=(0,s.up)("q-input"),W=(0,s.up)("q-tooltip"),C=(0,s.up)("q-btn"),S=(0,s.up)("q-chip"),y=(0,s.up)("q-td"),q=(0,s.up)("q-btn-group"),v=(0,s.up)("q-item-label"),k=(0,s.up)("q-item-section"),D=(0,s.up)("q-item"),x=(0,s.up)("q-list"),j=(0,s.up)("q-card"),V=(0,s.up)("q-table"),N=(0,s.up)("q-card-section"),Q=(0,s.up)("q-separator"),Z=(0,s.up)("q-select"),U=(0,s.up)("q-form"),A=(0,s.up)("q-card-actions"),T=(0,s.up)("q-dialog"),Y=(0,s.up)("q-page"),F=(0,s.Q2)("close-popup"),L=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.j4)(Y,{class:"row"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",o,[(0,s.Wm)("div",i,[(0,s.Wm)("div",d,[(0,s.Wm)("div",n,[(0,s.Wm)(V,{flat:"",bordered:"",class:"statement-table",title:"Manage Class",rows:f.listclass,columns:f.columns,"hide-header":"grid"===f.mode,"row-key":"__index",grid:"grid"==f.mode,filter:f.filter,"virtual-scroll":"",pagination:f.pagination,"onUpdate:pagination":l[3]||(l[3]=e=>f.pagination=e),"rows-per-page-options":[0]},{"top-right":(0,s.w5)((t=>[(0,s.Wm)(I,{outlined:"",dense:"",debounce:"300",modelValue:f.filter,"onUpdate:modelValue":l[1]||(l[1]=e=>f.filter=e),placeholder:"Search"},{append:(0,s.w5)((()=>[(0,s.Wm)(_,{name:"search"})])),_:1},8,["modelValue"]),(0,s.Wm)(C,{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e=>b.setFs(t)},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(W,{disable:e.$q.platform.is.mobile},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(t.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen"),1)])),_:2},1032,["disable"]),[[F]])])),_:2},1032,["icon","onClick"]),(0,s.Wm)(C,{flat:"",round:"",dense:"",icon:"grid"===f.mode?"list":"grid_on",onClick:l[2]||(l[2]=e=>f.mode="grid"===f.mode?"list":"grid")},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(W,{disable:e.$q.platform.is.mobile},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)("grid"===f.mode?"List":"Grid"),1)])),_:1},8,["disable"]),[[F]])])),_:1},8,["icon"]),c])),"body-cell-status":(0,s.w5)((e=>[(0,s.Wm)(y,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{color:"Active"===e.row.status?"green":"Disable"===e.row.status?"red":"grey","text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.row.status),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-action":(0,s.w5)((e=>[(0,s.Wm)(y,{class:"text-right"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{outline:""},{default:(0,s.w5)((()=>[(0,s.Wm)(C,{size:"0.75rem",outline:"",color:"primary",field:"edit",icon:"edit",label:"Edit",onClick:l=>b.editItem(e.row)},null,8,["onClick"]),(0,s.Wm)(C,{size:"0.75rem",outline:"",color:"primary",label:"Delete",icon:"delete",onClick:l=>b.deleteItem(e.row)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),item:(0,s.w5)((e=>[(0,s.Wm)("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:e.selected?"transform: scale(0.95);":""},[(0,s.Wm)(j,{class:e.selected?"bg-grey-2":""},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{dense:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(e.cols,(l=>((0,s.wg)(),(0,s.j4)(D,{key:l.name},{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(l.label),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(k,{side:""},{default:(0,s.w5)((()=>["status"===l.name?((0,s.wg)(),(0,s.j4)(S,{key:0,color:"Active"==e.row.status?"green":"Disable"==e.row.status?"red":"grey","text-color":"white",dense:"",class:"text-weight-bolder",square:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(l.value),1)])),_:2},1032,["color"])):"action"===l.name?((0,s.wg)(),(0,s.j4)("div",u,[(0,s.Wm)(C,{class:"q-ma-xs",size:"0.6rem",outline:"",color:"primary",field:"edit",icon:"edit",label:"Edit",onClick:l=>b.editItem(e.row)},null,8,["onClick"]),(0,s.Wm)(C,{class:"q-ma-xs",size:"0.6rem",outline:"",color:"primary",label:"Delete",icon:"delete",onClick:l=>b.deleteItem(e.row)},null,8,["onClick"])])):((0,s.wg)(),(0,s.j4)(v,{key:2,caption:"",class:l.classes?l.classes:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(l.value),1)])),_:2},1032,["class"]))])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["class"])],4)])),bottom:(0,s.w5)((()=>[(0,s.Wm)(C,{dense:"",outline:"",color:"primary",icon:"add",label:"Add Class",onClick:b.ViewRow,"no-caps":""},null,8,["onClick"])])),_:1},8,["rows","columns","hide-header","grid","filter","pagination"])])]),(0,s.Wm)(T,{modelValue:f.show_dialog,"onUpdate:modelValue":l[4]||(l[4]=e=>f.show_dialog=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{style:{width:"600px","max-width":"60vw"}},{default:(0,s.w5)((()=>[(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(C,{round:"",flat:"",dense:"",icon:"close",class:"float-right",color:"grey-8"},null,512),[[F]]),r,(0,s.Wm)("div",m,[(0,s.Wm)(C,{outline:"",class:"addsubject",color:"primary",icon:"add",label:"Add New Subject",onClick:b.AddSubject},null,8,["onClick"])])])),_:1}),(0,s.Wm)(Q,{inset:""}),(0,s.Wm)(N,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{bordered:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(f.editedItem.Subject,((e,l)=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(D,{clickable:"",label:e.title,"header-class":"text-primary",style:{"border-bottom":"1px solid grey"},key:l},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{class:"col-9"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{filled:"",modelValue:e.SubID,"onUpdate:modelValue":l=>e.SubID=l,options:f.SubjectList,"option-value":"ID","option-label":"Name",label:"Subject","map-options":"","emit-value":"","display-value":`${e.SubID?e.Sub:"*none*"}`},null,8,["modelValue","onUpdate:modelValue","options","display-value"]),(0,s.Wm)(Z,{filled:"",modelValue:e.TeacherID,"onUpdate:modelValue":l=>e.TeacherID=l,options:f.TeacherList,"option-value":"ID","option-label":"Name",label:"Teacher","map-options":"","emit-value":"","display-value":`${e.SubID?e.TeacherName:"*none*"}`},null,8,["modelValue","onUpdate:modelValue","options","display-value"])])),_:2},1024),(0,s.Wm)(k,{class:"col-auto"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,{color:"primary",icon:"save",onClick:l=>b.UpdateSubject(e,f.editedItem.ID)},null,8,["onClick"]),(0,s.Wm)(C,{color:"red-5",icon:"delete",onClick:t=>b.DeleteSubject(l,e.CSID)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"])),[[L]]))),128))])),_:1})])),_:1})])),_:1}),(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.Wm)(A,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(C,{flat:"",label:"Close",color:"warning",dense:""},null,512),[[F]])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,s.Wm)("div",null,[(0,s.Wm)(T,{modelValue:f.newclass,"onUpdate:modelValue":l[7]||(l[7]=e=>f.newclass=e),class:"q-pa-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,{style:{width:"800px","max-width":"60vw"}},{default:(0,s.w5)((()=>[p,(0,s.Wm)(N,{class:"q-pt-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"q-pb-xs"},{default:(0,s.w5)((()=>[w])),_:1}),(0,s.Wm)(I,{dense:"",outlined:"",modelValue:f.C_Name,"onUpdate:modelValue":l[5]||(l[5]=e=>f.C_Name=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{class:"q-pb-xs"},{default:(0,s.w5)((()=>[g])),_:1}),(0,s.Wm)(I,{dense:"",outlined:"",modelValue:f.C_Year,"onUpdate:modelValue":l[6]||(l[6]=e=>f.C_Year=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.Wm)(A,{align:"right"},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(C,{flat:"",label:"Cancel",color:"warning",dense:""},null,512),[[F]]),(0,s.wy)((0,s.Wm)(C,{flat:"",label:"OK",color:"primary",dense:"",onClick:b.Addclass},null,8,["onClick"]),[[F]])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var f=t(515),b=t.n(f),_=(t(7280),t(7874)),I=t(2589),W=t(1959);const C={computed:b()(b()({},(0,_.Se)({getclass:"general/getclass"})),{},{Sid(){return String(this.CSID)}}),setup(){return{card:(0,W.iH)(!1)}},data(){return{defaultItem:{ID:0,Name:0,Year:0},inFs:!1,columns:[{name:"Name",label:"Class Name",align:"left",field:"Name",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"Year",label:"Year",field:"Year",sortable:!0,sort:(e,l)=>parseInt(e,10)-parseInt(l,10)},{name:"action",label:"Actions",field:"",align:"right"}],listclass:[{ID:0,Name:"EH",Year:"2021",Subject:[]}],noti:()=>{},show_dialog:!1,editedIndex:-1,editedItem:this.defaultItem,filter:"",mode:"list",pagination:{page:1},page:1,totalRecord:0,pageCount:1,newclass:!1,TeacherList:[],SubjectList:[],C_Name:"",C_Year:""}},updated(){console.log("uu"),this.refresh()},created(){console.log("cc"),this.refresh()},methods:{refresh(){(0,I.e)({Action:2}).then((e=>{"Success"==e.msg&&(this.listclass=JSON.parse(e.data),console.log(e.data))})),(0,I.e)({Action:3}).then((e=>{"Success"==e.msg&&(this.TeacherList=JSON.parse(e.data),console.log(e.data))})),(0,I.e)({Action:4}).then((e=>{"Success"==e.msg&&(this.SubjectList=JSON.parse(e.data),console.log(e.data))}))},editRow(e){this.noti(),this.noti=this.$q.notify({type:"info",textColor:"grey-10",multiLine:!0,message:`I'll edit row data => ${JSON.stringify(e.row).split(",").join(", ")}`,timeout:2e3})},deleteRow(e){this.noti(),this.noti=this.$q.notify({type:"negative",multiline:!0,message:`I'll delete row data => ${JSON.stringify(e.row).split(",").join(", ")}`,timeout:2e3})},addRow(){this.editedIndex>-1?Object.assign(this.Studentlist[this.editedIndex],this.editedItem):this.Studentlist.push(this.editedItem),this.close()},deleteItem(e){console.log(e.ID);var l={Action:6,ID:e.ID};(0,I.e)(l).then((e=>{console.log(e),"Success"==e.msg&&console.log("Success")})),this.C_Year,this.C_Name,this.$q.notify({type:"positive",message:"Class Deleted",timeout:500}),this.refresh()},editItem(e){this.editedIndex=this.listclass.findIndex(((l,t)=>l.__index===e.__index)),this.editedItem=Object.assign({},e),this.show_dialog=!0},AddSubject(){this.editedItem.Subject.unshift({})},close(){this.show_dialog=!1,setTimeout((()=>{this.editedItem=this.defaultItem,this.editedIndex=-1}),300)},setFs(e){e.toggleFullscreen(),this.inFs=e.inFullscreen},ViewRow(){this.newclass=!0},CloseView(){this.newclass=!1,setTimeout((()=>{this.editedItem=this.defaultItem,this.editedIndex=-1}),300)},UpdateSubject(e,l){if(console.log(e,l),null==e.CSID){var t={Action:8,ID:e.TeacherID,ClassID:l,SubID:e.SubID};(0,I.e)(t).then((e=>{console.log(e),"Success"==e.msg&&console.log("Success")}))}else{t={Action:9,ID:e.TeacherID,ClassID:e.CSID,SubID:e.SubID};(0,I.e)(t).then((e=>{console.log(e),"Success"==e.msg&&console.log("Success")}))}},DeleteSubject(e,l){console.log(e,l);var t={Action:7,ID:l};(0,I.e)(t).then((e=>{console.log(e),"Success"==e.msg&&console.log("Success")})),this.editedItem.Subject.splice(e,1)},Addclass(){console.log(this.C_Year,this.C_Name);var e={Action:5,title:this.C_Name,notes:this.C_Year};console.log(e),(0,I.e)(e).then((e=>{console.log(e),"Success"==e.msg&&console.log("Success")})),this.C_Year,this.C_Name,this.$q.notify({type:"positive",message:"New Class added",timeout:500}),this.refresh()}}};var S=t(4379),y=t(6952),q=t(4842),v=t(4554),k=t(8240),D=t(8870),x=t(3884),j=t(7030),V=t(6375),N=t(151),Q=t(7011),Z=t(3414),U=t(2035),A=t(2350),T=t(6778),Y=t(5589),F=t(5869),L=t(5269),z=t(3314),$=t(9367),O=t(677),R=t(6489),J=t(7518),E=t.n(J);C.render=h;const H=C;E()(C,"components",{QPage:S.Z,QTable:y.Z,QInput:q.Z,QIcon:v.Z,QBtn:k.Z,QTooltip:D.Z,QTd:x.Z,QChip:j.Z,QBtnGroup:V.Z,QCard:N.Z,QList:Q.Z,QItem:Z.Z,QItemSection:U.Z,QItemLabel:A.Z,QDialog:T.Z,QCardSection:Y.Z,QSeparator:F.Z,QForm:L.Z,QSelect:z.Z,QCardActions:$.Z}),E()(C,"directives",{ClosePopup:O.Z,Ripple:R.Z})}}]);